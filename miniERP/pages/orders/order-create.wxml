<!-- 创建订单页面 -->
<view class="container">
  <form bindsubmit="submitOrder">
    <view class="form-section">
      <view class="section-title">客户信息</view>
      <view class="form-item">
        <text class="label">客户选择</text>
        <picker bindchange="selectCustomer" range="{{customers}}" range-key="name" value="{{selectedCustomerIndex}}">
          <view class="picker">
            {{selectedCustomerName || '请选择客户'}}
          </view>
        </picker>
      </view>
    </view>

    <view class="form-section">
      <view class="section-title">商品列表</view>
      <view class="product-list">
        <view class="product-item" wx:for="{{selectedProducts}}" wx:key="id">
          <view class="product-info">
            <text class="product-name">{{item.name}}</text>
            <text class="product-price">¥{{item.price}}</text>
          </view>
          <view class="quantity-controls">
            <button class="quantity-btn" bindtap="decreaseQuantity" data-index="{{index}}">-</button>
            <text class="quantity">{{item.quantity}}</text>
            <button class="quantity-btn" bindtap="increaseQuantity" data-index="{{index}}">+</button>
          </view>
        </view>
      </view>
      
      <button class="add-product-btn" bindtap="addProduct">添加商品</button>
    </view>

    <view class="form-section">
      <view class="section-title">订单备注</view>
      <view class="form-item">
        <textarea class="textarea" placeholder="请输入订单备注信息" bindinput="onNotesInput" value="{{notes}}"></textarea>
      </view>
    </view>

    <view class="summary-section">
      <view class="summary-item">
        <text class="label">商品总数:</text>
        <text class="value">{{totalQuantity}}</text>
      </view>
      <view class="summary-item">
        <text class="label">订单总金额:</text>
        <text class="value total">¥{{totalAmount}}</text>
      </view>
    </view>

    <button class="submit-btn" formType="submit" disabled="{{!canSubmit}}">创建订单</button>
  </form>
</view>